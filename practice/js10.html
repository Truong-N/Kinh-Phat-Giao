
<!DOCTYPE html>
<html lang="en">
   <head>
      <meta charset="UTF-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <title>js10</title>
   </head>
   <style>
      * {
      cursor: pointer;
      }
      .viet {
      color: red;
      }
      img { width: 75%;}
      
   </style>
   <body>
      <div>
         <div>
            <button id="stop">Stop!</button>
            <button id="speak">Speak</button>
         </div>
         <label><input type="checkbox" id="readeng" name="pencil" >read English only</label><br>
         <a href="./js9EventObject.html">Prev</a>
         <!-- <a href="./js0.html">Index</a> -->
         <a href="./js11.html">Next</a>
      </div>
      <div style="font-size: larger;" class="read"></div>
      <div class="vietEng">
      
      </div>
      <script>
        let vietEng = document.querySelector(".vietEng");
        let vietParagraphs = `How Does the removeEventListener Method Work?~~ In the previous lesson, you learned how to work with "click" and "input" events by using the addEventListener() method.~ In this lesson, you will learn how to remove event listeners using the removeEventListener() method.~~ The removeEventListener() method is used to remove an event listener that was previously added to an element using the addEventListener() method.~ This is useful when you want to stop listening for a particular event on an element.~~ Here is the basic syntax for the removeEventListener() method:~~ element.removeEventListener("event", listener);~~ Just like the addEventListener() method, the removeEventListener() method takes two arguments:~ the event you want to remove and the listener function that was previously added.~~ There is also an additional optional third argument that can be passed to the removeEventListener() method.~ This argument can either be the options or useCapture.~~ The options argument is an object that specifies the options for the event listener, such as whether the event listener should be passive or once.~~ The useCapture argument is a boolean value that specifies whether the event should be captured during the event propagation phase.~~ Most of the time, you will only need to pass the event and listener arguments to the removeEventListener() method.~~ Let's take a look at an example to better understand how the removeEventListener() method works:~~ Here is an example with some HTML:~~ &lt;link rel="stylesheet" href="styles.css" /&gt;~~ &lt;h1&gt;Event Listener examples&lt;/h1&gt;~~ &lt;button id="btn"&gt;Change background color&lt;/button&gt;~~ button {~~ background:_linear-gradient(135deg, #4da3ff, #007bff);~~ color:_white;~~ border:_none;~~ padding:_12px 20px;~~ border-radius:_8px;~~ font-size:_16px;~~ font-weight:_500;~~ cursor:_pointer;~~ transition:_all 0.25s ease;~~ box-shadow:_0 4px 10px rgba(0, 123, 255, 0.2);~~ If we want to toggle the background color between grey and blue, then we can use an event listener for that.~~ We first need to access the button element along with the body element:~~ const bodyEl = document.querySelector("body");~~ const btn = document.getElementById("btn");~~ Then we need to create the function responsible for toggling between the grey and blue colors:~~ let isBgColorGrey = true;~~ function toggleBgColor() {~~ bodyEl.style.backgroundColor = isBgColorGrey ?_"blue" :_"grey";~~ isBgColorGrey = !isBgColorGrey;~~ We are using a boolean variable isBgColorGrey to keep track of the current background color.~ If the background color is grey, then we change it to blue, and vice versa.~~ Then we need to add an event listener to the button element to call the toggleBgColor function when the button is clicked:~~ btn.addEventListener("click", toggleBgColor);~~ Here is the full example so far:~~ &lt;link rel="stylesheet" href="styles.css" /&gt;~~ &lt;h1&gt;Event Listener examples&lt;/h1&gt;~~ &lt;button id="btn"&gt;Change background color&lt;/button&gt;~~ &lt;script src="index.js"&gt;&lt;/script&gt;~~ button {~~ background:_linear-gradient(135deg, #4da3ff, #007bff);~~ color:_white;~~ border:_none;~~ padding:_12px 20px;~~ border-radius:_8px;~~ font-size:_16px;~~ font-weight:_500;~~ cursor:_pointer;~~ transition:_all 0.25s ease;~~ box-shadow:_0 4px 10px rgba(0, 123, 255, 0.2);~~ button:hover {~~ background:_linear-gradient(135deg, #66b3ff, #3399ff);~~ box-shadow:_0 6px 14px rgba(0, 123, 255, 0.3);~~ transform:_translateY(-2px);~~ const bodyEl = document.querySelector("body");~~ const btn = document.getElementById("btn");~~ let isBgColorGrey = true;~~ function toggleBgColor() {~~ bodyEl.style.backgroundColor = isBgColorGrey ?_"blue" :_"grey";~~ isBgColorGrey = !isBgColorGrey;~~ btn.addEventListener("click", toggleBgColor);~~ Each time the button is clicked, the background color of the body will change between grey and blue.~~ We can update the HTML to include a paragraph element that will be used to remove the event listener when hovered over:~~ &lt;link rel="stylesheet" href="styles.css" /&gt;~~ &lt;h1&gt;Event Listener examples&lt;/h1&gt;~~ &lt;p id="para"&gt;MouseOver this text to remove the event listener&lt;/p&gt;~~ &lt;button id="btn"&gt;Change background color&lt;/button&gt;~~ &lt;script src="index.js"&gt;&lt;/script&gt;~~ To remove the event listener when the paragraph is hovered over, we can add an event listener to the paragraph element.~ We are using the mouseover event and passing in a function that removes the event listener from the button element:~~ const para = document.getElementById("para");~~ const btn = document.getElementById("btn");~~ para.addEventListener("mouseover", () =&gt~ {~~ btn.removeEventListener("click", toggleBgColor);~~ });~~ When the paragraph is hovered over, the event listener for the button click event is removed, and the background color will no longer change when the button is clicked.~~ Here is the full example with the removeEventListener() method:~~ &lt;link rel="stylesheet" href="styles.css" /&gt;~~ &lt;h1&gt;Event Listener examples&lt;/h1&gt;~~ &lt;p id="para"&gt;MouseOver this text to remove the event listener&lt;/p&gt;~~ &lt;button id="btn"&gt;Change background color&lt;/button&gt;~~ &lt;script src="index.js"&gt;&lt;/script&gt;~~ button {~~ background:_linear-gradient(135deg, #4da3ff, #007bff);~~ color:_white;~~ border:_none;~~ padding:_12px 20px;~~ border-radius:_8px;~~ font-size:_16px;~~ font-weight:_500;~~ cursor:_pointer;~~ transition:_all 0.25s ease;~~ box-shadow:_0 4px 10px rgba(0, 123, 255, 0.2);~~ button:hover {~~ background:_linear-gradient(135deg, #66b3ff, #3399ff);~~ box-shadow:_0 6px 14px rgba(0, 123, 255, 0.3);~~ transform:_translateY(-2px);~~ const bodyEl = document.querySelector("body");~~ const para = document.getElementById("para");~~ const btn = document.getElementById("btn");~~ let isBgColorGrey = true;~~ function toggleBgColor() {~~ bodyEl.style.backgroundColor = isBgColorGrey ?_"blue" :_"grey";~~ isBgColorGrey = !isBgColorGrey;~~ btn.addEventListener("click", toggleBgColor);~~ para.addEventListener("mouseover", () =&gt~ {~~ btn.removeEventListener("click", toggleBgColor);~~ });~~ Real world examples of when to use the removeEventListener() method include removing event listeners when a modal is closed in a web application or when a user logs out of an application.~~ Questions~~ What is the purpose of the removeEventListener() method?~~ To add a new event listener to an element.~~ To remove an event listener that was previously added to an element.~~ To change the properties of an existing event listener.~~ To prevent any event listeners from being added.~~ Which arguments are required for the removeEventListener() method?~~ Only the event type.~~ The event type and the listener function.~~ The event type, listener function, and options.~~ The event type and options only.~~ When might you want to use the removeEventListener() method in a real-world application?~~ When a user logs into the application.~~ When a user interacts with a button.~~ When a modal is closed or when a user logs out.~~ When a user refreshes the page.~ `
        let engParagraphs = `Phương thức removeEventListener hoạt động như thế nào?~~ Trong bài học trước, bạn đã học cách làm việc với các sự kiện "click" và "input" bằng cách sử dụng phương thức addEventListener().~ Trong bài học này, bạn sẽ học cách xóa trình lắng nghe sự kiện bằng phương thức removeEventListener().~~ Phương thức removeEventListener() được sử dụng để xóa một trình lắng nghe sự kiện đã được thêm vào một phần tử trước đó bằng phương thức addEventListener().~ Điều này hữu ích khi bạn muốn ngừng lắng nghe một sự kiện cụ thể trên một phần tử.~~ Đây là cú pháp cơ bản cho phương thức removeEventListener():~~ element.removeEventListener("event", listener);~~ Giống như phương thức addEventListener(), phương thức removeEventListener() nhận hai đối số:~ sự kiện bạn muốn xóa và hàm lắng nghe đã được thêm trước đó.~~ Ngoài ra còn có một đối số thứ ba tùy chọn có thể được truyền cho phương thức removeEventListener().~ Đối số này có thể là options hoặc useCapture.~~ Đối số options là một đối tượng chỉ định các tùy chọn cho trình lắng nghe sự kiện, chẳng hạn như liệu trình lắng nghe sự kiện nên là thụ động hay một lần.~~ Đối số useCapture là một giá trị boolean chỉ định liệu sự kiện có nên được bắt giữ trong giai đoạn lan truyền sự kiện hay không.~~ Hầu hết thời gian, bạn chỉ cần truyền các đối số sự kiện và trình lắng nghe cho phương thức removeEventListener(). ~~ Hãy xem một ví dụ để hiểu rõ hơn cách hoạt động của phương thức removeEventListener():~~ Đây là một ví dụ với một số mã HTML:~~ &lt;link rel="stylesheet" href="styles.css" /&gt;~~ &lt;h1&gt;Ví dụ về Trình lắng nghe sự kiện&lt;/h1&gt;~~ &lt;button id="btn"&gt;Thay đổi màu nền&lt;/button&gt;~~ button {~~ background:_linear-gradient(135deg, #4da3ff, #007bff);~~ color:_white;~~ border:_none;~~ padding:_12px 20px;~~ border-radius:_8px;~~ font-size:_16px;~~ font-weight:_500;~~ cursor:_pointer;~~ transition:_all 0.25s ease;~~ box-shadow:_0 4px 10px rgba(0, 123, 255, 0.2);~~ Nếu muốn chuyển đổi màu nền giữa xám và xanh lam, ta có thể sử dụng trình lắng nghe sự kiện.~~ Trước tiên, ta cần truy cập phần tử button cùng với phần tử body:~~ const bodyEl = document.querySelector("body");~~ const btn = document.getElementById("btn");~~ Sau đó, ta cần tạo hàm chịu trách nhiệm chuyển đổi giữa màu xám và xanh lam:~~ let isBgColorGrey = true;~~ function toggleBgColor() {~~ bodyEl.style.backgroundColor = isBgColorGrey ?_"blue" :_"grey";~~ isBgColorGrey = !isBgColorGrey;~~ Chúng ta đang sử dụng một biến boolean isBgColorGrey để theo dõi màu nền hiện tại.~ Nếu màu nền là xám, thì chúng ta sẽ đổi nó thành xanh lam, và ngược lại.~~ Sau đó, chúng ta cần thêm một trình lắng nghe sự kiện vào phần tử nút để gọi hàm toggleBgColor khi nút được nhấp:~~ btn.addEventListener("click", toggleBgColor);~~ Đây là ví dụ đầy đủ cho đến nay:~~ &lt;link rel="stylesheet" href="styles.css" /&gt; ~~ &lt;h1&gt;Ví dụ về Trình lắng nghe sự kiện&lt;/h1&gt;~~ &lt;button id="btn"&gt;Thay đổi màu nền&lt;/button&gt;~~ &lt;script src="index.js"&gt;&lt;/script&gt;~~ button {~~ background:_linear-gradient(135deg, #4da3ff, #007bff);~~ color:_white;~~ border:_none;~~ padding:_12px 20px;~~ border-radius:_8px;~~ font-size:_16px;~~ font-weight:_500;~~ cursor:_pointer;~~ transition:_all 0.25s ease;~~ box-shadow:_0 4px 10px rgba(0, 123, 255, 0.2);~~ button:hover {~~ background:_linear-gradient(135deg, #66b3ff, #3399ff);~~ box-shadow:_0 6px 14px rgba(0, 123, 255, 0.3);~~ transform:_translateY(-2px);~~ const bodyEl = document.querySelector("body");~~ const btn = document.getElementById("btn");~~ let isBgColorGrey = true;~~ function toggleBgColor() {~~ bodyEl.style.backgroundColor = isBgColorGrey ?_"blue" :_"grey";~~ isBgColorGrey = !isBgColorGrey;~~ btn.addEventListener("click", toggleBgColor);~~ Mỗi khi nút được nhấp, màu nền của phần thân sẽ thay đổi giữa màu xám và màu xanh lam.~~ Chúng ta có thể cập nhật HTML để bao gồm một phần tử đoạn văn sẽ được sử dụng để xóa trình lắng nghe sự kiện khi di chuột qua:~~ &lt;link rel="stylesheet" href="styles.css" /&gt;~~ &lt;h1&gt;Ví dụ về Trình lắng nghe sự kiện&lt;/h1&gt; ~~ &lt;p id="para"&gt;Di chuột qua văn bản này để xóa trình lắng nghe sự kiện&lt;/p&gt;~~ &lt;button id="btn"&gt;Thay đổi màu nền&lt;/button&gt;~~ &lt;script src="index.js"&gt;&lt;/script&gt;~~ Để xóa trình lắng nghe sự kiện khi di chuột qua đoạn văn, chúng ta có thể thêm trình lắng nghe sự kiện vào phần tử đoạn văn.~ Chúng ta đang sử dụng sự kiện mouseover và truyền vào một hàm xóa trình lắng nghe sự kiện khỏi phần tử nút:~~ const para = document.getElementById("para");~~ const btn = document.getElementById("btn");~~ para.addEventListener("mouseover", () =&gt;~ {~~ btn.removeEventListener("click", toggleBgColor);~~ }); ~~ Khi di chuột qua đoạn văn, trình lắng nghe sự kiện cho sự kiện nhấp chuột vào nút sẽ bị xóa và màu nền sẽ không còn thay đổi khi nhấp vào nút nữa.~~ Đây là ví dụ đầy đủ với phương thức removeEventListener():~~ &lt;link rel="stylesheet" href="styles.css" /&gt;~~ &lt;h1&gt;Ví dụ về Trình lắng nghe sự kiện&lt;/h1&gt;~~ &lt;p id="para"&gt;Di chuột qua văn bản này để xóa trình lắng nghe sự kiện&lt;/p&gt;~~ &lt;button id="btn"&gt;Thay đổi màu nền&lt;/button&gt; ~~ &lt;script src="index.js"&gt;&lt;/script&gt;~~ button {~~ background:_linear-gradient(135deg, #4da3ff, #007bff);~~ color:_white;~~ border:_none;~~ padding:_12px 20px;~~ border-radius:_8px;~~ font-size:_16px;~~ font-weight:_500;~~ cursor:_pointer;~~ transition:_all 0.25s ease;~~ box-shadow:_0 4px 10px rgba(0, 123, 255, 0.2);~~ button:hover {~~ background:_linear-gradient(135deg, #66b3ff, #3399ff);~~ box-shadow:_0 6px 14px rgba(0, 123, 255, 0.3);~~ transform:_translateY(-2px);~~ const bodyEl = document.querySelector("body");~~ const para = document.getElementById("para");~~ const btn = document.getElementById("btn");~~ let isBgColorGrey = true;~~ function toggleBgColor() {~~ bodyEl.style.backgroundColor = isBgColorGrey ? _"blue" : _"grey";~~ isBgColorGrey = !isBgColorGrey;~~ btn.addEventListener("click", toggleBgColor);~~ para.addEventListener("mouseover", () =&gt;~ {~~ btn.removeEventListener("click", toggleBgColor);~~ });~~ Ví dụ thực tế về khi nào nên sử dụng phương thức removeEventListener() bao gồm việc xóa trình lắng nghe sự kiện khi một cửa sổ modal được đóng trong ứng dụng web hoặc khi người dùng đăng xuất khỏi ứng dụng.~~ Câu hỏi~~ Mục đích của phương thức removeEventListener() là gì?~~ Để thêm một trình lắng nghe sự kiện mới vào một phần tử.~~ Để xóa một trình lắng nghe sự kiện đã được thêm vào một phần tử trước đó. ~~ Để thay đổi thuộc tính của một trình lắng nghe sự kiện hiện có.~~ Để ngăn không cho thêm bất kỳ trình lắng nghe sự kiện nào.~~ Những đối số nào là bắt buộc đối với phương thức removeEventListener()?~~ Chỉ cần loại sự kiện.~~ Loại sự kiện và hàm lắng nghe.~~ Loại sự kiện, hàm lắng nghe và các tùy chọn.~~ Chỉ cần loại sự kiện và các tùy chọn.~~ Khi nào bạn có thể muốn sử dụng phương thức removeEventListener() trong một ứng dụng thực tế?~~ Khi người dùng đăng nhập vào ứng dụng. ~~ Khi người dùng tương tác với một nút.~~ Khi cửa sổ modal đóng lại hoặc khi người dùng đăng xuất.~~ Khi người dùng làm mới trang.~ `
        let englishParagraphsArray = engParagraphs
            // .replaceAll("&lt;", "<")
            // .replaceAll("&gt;", ">")
            .split("~~")
        let vietParagraphsArray = vietParagraphs
            // .replaceAll("&lt;", "<")
            // .replaceAll("&gt;", ">")
            .split("~~")
        let eng_arr = []
        let viet_arr = []
        function show_arr(vietArr, engArr) {
            let strHTML = ''
        //    vietEng.innerHTML += "<p>"
           strHTML += "<p> " 
           for (let i = 0; i < vietArr.length; i++) {
            if (vietArr[i] === engArr[i]){
                engArr[i] = '//'
            }
            //  vietEng.innerHTML += "<span> " + vietArr[i].trim() + ' </span><br><span style="color:red"> ' + engArr[i].trim() + " </span><br>"
            //  vietEng.innerHTML += vietArr[i].trim() + '<br><span style="color:red"> ' + engArr[i].trim() + " </span><br>"
             strHTML += vietArr[i].trim() + '<br><span style="color:red"> ' + engArr[i].trim() + " </span><br>"
             eng_arr.push(engArr[i])
             viet_arr.push(vietArr[i])
           }
        //    vietEng.innerHTML += "</p>"
           strHTML += "</p>"
           vietEng.innerHTML += strHTML
        }
        for (let i = 0; i < vietParagraphsArray.length; i++){
           englishParagraph = englishParagraphsArray[i].split("~")
           vietParagraph = vietParagraphsArray[i].split("~")
           show_arr(vietParagraph, englishParagraph)
        }
         const readeng = document.querySelector("#readeng")
         const eng = document.querySelectorAll(".eng")
         let pre_txt = ' '
         let readEngOnly = false
         
         readeng.addEventListener("change", () => {
            readEngOnly = !readEngOnly
            
         })
         const msg = new SpeechSynthesisUtterance();
         let voice = [];
         const speakButton = document.querySelector('#speak');
         const stopButton = document.querySelector('#stop');

         
         function speakMinutes_viet(minutesArray) {
            if (minutesArray.length > 0) {

               let txt = minutesArray.shift(); // extract first item
               
               let utterance = new SpeechSynthesisUtterance(txt);
               // When the current utterance ends, speak the next one
               utterance.onend = function (event) {
               speakMinutes_eng(minutesArray); // Recursively call the function for the next item
               };

               // Handle potential errors
               utterance.onerror = function (event) {
                  console.error('Speech synthesis error: ' + event.error);
               };
               utterance.lang = 'en-US'// 'vi-VN'
               let txt1 = '<span style="color:red"> '+minutesArray[0].trim()+' </span></br>'
               vietEng.querySelector("p").remove()
               document.querySelector(".read").innerHTML = "<h2>"+txt+"<br>"+txt1+"</h2>"
               if( readEngOnly){
                  utterance.text = ' '
               }
               speechSynthesis.speak(utterance);

            }
         }
         function speakMinutes_eng(minutesArray) {
            if (minutesArray.length > 0) {

               let txt = minutesArray.shift(); // extract first item
               
               let utterance = new SpeechSynthesisUtterance(txt);
               // When the current utterance ends, speak the next one
               utterance.onend = function (event) {
               console.log('Speech ended, starting next minute.');
               speakMinutes_viet(minutesArray); // Recursively call the function for the next item
               };

               // Handle potential errors
               utterance.onerror = function (event) {
                  console.error('Speech synthesis error: ' + event.error);
               };
               utterance.lang = 'vi-VN'// 'en-US'
               speechSynthesis.speak(utterance);
            }
         }
         function readEV(startOver = true) {
            speechSynthesis.cancel();
            if (startOver) {
               let combine_arr = []
               
               for (let i = 0; i < eng_arr.length; i++) {
                 combine_arr.push(viet_arr[i])
                 combine_arr.push(eng_arr[i])
               }
               speakMinutes_viet(combine_arr)
            }
         }
         speakButton.addEventListener('click', readEV);
         stopButton.addEventListener('click', readEV.bind(null, false));
      </script>
   </body>
</html>